{% extends "items/mail/base.html" %}
{% load matman_tags %}

{% block body %}
<p>
    Hello {{ user.first_name }},<br>
    <br>
    You have currently borrowed the following materials and their return date is due:
</p>

<table class="table table-striped table-hover sortable-table" id="item_table_{{ prefix }}">
    <tr>
        <th>Item</th>
        <th>Borrowed at</th>
        <th>Usage Location</th>
        <th>Owner</th>
        <th>Storage Location</th>
        <th>Estimated Returndate</th>
        <th></th>
    </tr>
    {% for borrow in due %}
    <tr>
        <th><a href="https://{{ site.domain }}{% url "item-detail" borrow.item.identifier %}" class="link-primary">{{ borrow.item.identifier }}</a></th>
        <td>{{ borrow.borrowed_at }}</td>
        <td>{{ borrow.usage_location }}</td>
        <td>
            {% if borrow.item.owner %}
            <a href="https://{{ site.domain }}{% url "profile" borrow.item.owner %}" class="link-primary">{{ borrow.item.owner }}</a>
            {% endif %}
        </td>
        <td>{{ borrow.item.location }}</td>
        <td>{{ borrow.estimated_returndate }}</td>
        <td>
            <a href="https://{{ site.domain }}{% url "borrow-edit" borrow.pk %}" class="link-primary">Edit Borrow details</a>
        </td>
    </tr>
    {% empty %}
    <tr><td>None</td></tr>
    {% endfor %}
</table>

<p>
    If you no longer need to borrow an item:
    <ol>
          <li>Check the item for completeness, function and possible damages</li>
          <li>Physically return item to its owner (or storage location)</li>
          <li>Don't forget to also return the item within MatMan!</li>
    </ol>
</p>
<p>
    If you need to expand the borrow duration:
    <ol>
          <li>Talk to the owner of the item</li>
          <li>Update the estimated return date of the item within MatMan</li>
    </ol>
</p>

<small>This mail was automatically generated by MatMan.</small>
{% endblock %}