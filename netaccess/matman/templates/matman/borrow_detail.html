{% extends "base.html" %}
{% load matman_tags %}

{% block title %}Borrow Details{% endblock %}

{% block content %}
<h1>{{ object }}</h1>
<section>
    {% if object.pictures.all %}
    {% include "matman/slideshow.html" with pictures=object.pictures %}
    {% endif %}
    <table class="table table-striped table-hover d-inline-flex my-3">
        <tr>
            <th>Serial Number:</th>
            <td>{{ object.serial_number }}</td>
        </tr>
        <tr>
            <th>Material Number:</th>
            <td>{{ object.material_number }}</td>
        </tr>
        <tr>
            <th>Manufacturer:</th>
            <td>{{ object.manufacturer }}</td>
        </tr>
        <tr>
            <th>Location:</th>
            <td>{{ object.location }}</td>
        </tr>
        <tr>
            <th>Owner:</th>
            <td><a href="{% url "profile" object.owner %}">{{ object.owner }}</a></td>
        </tr>
        <tr>
            <th>Tags:</th>
            <td>{{ object.tags.all|join:", " }}</td>
        </tr>
        <tr>
            <th>Active:</th>
            <td>{{ object.is_active }}</td>
        </tr>
        <tr>
            <th>Borrowed by:</th>
            {% if borrow %}
            <td><a href="{% url "profile" borrow.borrowed_by %}">{{ borrow.borrowed_by }}</a></td>
            {% else %}
            <td></td>
            {% endif %}
        </tr>
        <tr>
            <th>Borrowed at:</th>
            <td>{{ object.get_active_borrow.borrowed_at|date }}</td>
        </tr>
    </table>
    <h4>Description</h4>
        <section class="border border-dark rounded">
            {{ object.description|markdown }}
        </section>
    <h4>Borrow Notes</h4>
        <section class="border border-dark rounded">
            {{ borrow.notes|markdown }}
        </section>
    <div class="d-flex">
        <a class="btn btn-secondary m-1" href="{% url "material-edit" object.identifier %}">Edit</a>
        {% if object.owner != user and not object.get_active_borrow %}
        <a class="btn btn-primary m-1" href="{% url "borrow" object.identifier %}">Borrow Item</a>
        {% endif %}
        {% if object.get_active_borrow.borrowed_by == user %}
        <a class="btn btn-primary m-1" href="{% url "return" object.identifier %}">Return Item</a>
        {% endif %}
    </div>
</section>
{% endblock %}